language: cpp
os: linux
dist: bionic
compiler:
- gcc
- clang
jobs:
  include:
  - os: linux
    dist: trusty
    compiler: gcc
  # It doesn't compile with clang on trusty... so we don't do it!
  - os: linux
    dist: xenial
    compiler: gcc
  - os: linux
    dist: xenial
    compiler: clang
  - os: osx
    compiler: gcc
  - os: osx
    compiler: clang
install:
- git clone https://github.com/onqtam/doctest.git
- mkdir doctest/build
- cd doctest/build
- cmake ..
- sudo make -j2 install
- cd $TRAVIS_BUILD_DIR
- mkdir install
- cd install
- cmake ..
- sudo make -j2 install
- cd $TRAVIS_BUILD_DIR
script:
- mkdir build
- cd build
- cmake -D CMAKE_BUILD_TYPE=Release ../tests
- make -j2
- ./tests